<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xml>

<configuration>
	<statusListener
		class="ch.qos.logback.core.status.NopStatusListener" />

	<springProperty name="APP_NAME" scope="context"
		source="spring.application.name" />
	<springProperty name="PROFILE" scope="context"
		source="spring.profiles.active" />

	<springProfile name="dev">
		<Property name="LOG_PATTERN"
			value="%date{HH:mm:ss.SSS} %-5level [%thread] %logger{60}-&gt;%M:%L&gt; %msg%n" />
	</springProfile>

	<springProfile name="prod">
		<Property name="LOG_PATTERN"
			value="%date %-5level [%thread] %logger{60}-&gt;%M:%L&gt; %msg%n" />
	</springProfile>

	<!-- ========================== CONSOLE =========================== -->
	<appender name="CONSOLE"
		class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<charset>UTF-8</charset>
			<Pattern>${LOG_PATTERN}</Pattern>
		</encoder>
	</appender>

	<!-- ========================== ARQUIVOS ========================== -->
	<appender name="ROLFILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>${user.dir}/logs/${APP_NAME}-${PROFILE}.log</File>
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<FileNamePattern>${user.dir}/logs/${APP_NAME}-${PROFILE}.%d{yyyy-MM-dd}.%i.log.gz</FileNamePattern>
			<timeBasedFileNamingAndTriggeringPolicy
				class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
				<maxFileSize>96MB</maxFileSize>
			</timeBasedFileNamingAndTriggeringPolicy>
			<maxHistory>20</maxHistory>
			<totalSizeCap>20GB</totalSizeCap>
		</rollingPolicy>
		<encoder>
			<charset>UTF-8</charset>
			<Pattern>${LOG_PATTERN}</Pattern>
		</encoder>
	</appender>

	<!-- ========================= FRAMEWORKS ========================= -->
	<logger name="ch.qos.logback" level="WARN" />

	<logger name="com.zaxxer.hikari" level="WARN" />

	<logger name="java.awt" level="WARN" />

	<logger name="java.io.serialization" level="WARN" />

	<logger name="javax.activation" level="WARN" />

	<logger name="javax.management" level="WARN" />

	<logger name="javax.net" level="WARN" />

	<logger name="jdk.event.security" level="WARN" />

	<logger name="org.hibernate" level="WARN" />

	<logger name="org.springframework" level="WARN" />


	<!-- ======================= DASA ======================= -->
	<springProfile name="dev | hml">
		<logger name="br.com.dasa.integracao" level="TRACE" />
		<logger name="br.com.dasa.integracao" level="TRACE" />
	</springProfile>

	<springProfile name="prod">
		<logger name="br.com.dasa.integracao" level="TRACE" />
		<logger name="br.com.dasa.integracao" level="TRACE" />
	</springProfile>
	
	<springProfile name="dev">
		<root level="ERROR">
			<appender-ref ref="CONSOLE" />
		</root>
	</springProfile>

	<springProfile name="hml">
		<root level="TRACE">
			<appender-ref ref="ROLFILE" />
		</root>
	</springProfile>
	
	<springProfile name="prod">
		<root level="TRACE">
			<appender-ref ref="ROLFILE" />
		</root>
	</springProfile>
	


</configuration>